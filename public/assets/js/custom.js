function formatRupiah(t,e,n=!0){var a=t.replace(/[^,\d]/g,"").toString().split(","),i=a[0].length%3,o=a[0].substr(0,i),r=a[0].substr(i).match(/\d{3}/gi);return r&&(separator=i?".":"",o+=separator+r.join(".")),o=null!=a[1]?o+(n?"":","+a[1]):o,null==e?o:o?"Rp. "+o:""}function scrollTampil(t){t.scrollIntoView({behavior:"smooth"})}function checkAll(t="#checkall"){$("table").on("click",t,(function(){$(this).is(":checked")?$(".table input[type=checkbox]").each((function(){$(this).prop("checked",!0)})):$(".table input[type=checkbox]").each((function(){$(this).prop("checked",!1)})),$(".table input[type=checkbox]").change(),enableHapusTerpilih()})),$("[data-toggle=tooltip]").tooltip()}function enableHapusTerpilih(){var t=$("input[name='id_cb[]']:checked:not(:disabled)").filter((function(t){return 0==$(this).data("deletable")}));$("input[name='id_cb[]']:checked:not(:disabled)").length<=0?($(".aksi-terpilih").addClass("disabled"),$(".hapus-terpilih").addClass("disabled"),$(".hapus-terpilih").attr("href","#")):($(".aksi-terpilih").removeClass("disabled"),$(".hapus-terpilih").removeClass("disabled"),$(".hapus-terpilih").attr("href","#confirm-delete"),0!=t.length&&($(".hapus-terpilih").addClass("disabled"),$(".hapus-terpilih").attr("href","#")))}function deleteAllBox(t,e){return $("#confirm-delete").modal("show"),$("#ok-delete").click((function(){$("#"+t).attr("action",e),addCsrfField($("#"+t)[0]),$("#"+t).submit()})),!1}function aksiBorongan(t,e){return $("#confirm-status").modal("show"),$("#ok-status").click((function(){$("#"+t).attr("action",e),addCsrfField($("#"+t)[0]),$("#"+t).submit()})),!1}function cetakBox(){return $("#cetakBox").on("show.bs.modal",(function(t){var e=$(t.relatedTarget),n=e.data("title"),a=e.data("aksi"),i=e.data("href"),o=$(this);o.find(".title").text(n),o.find(".aksi").text(a),o.find("form").attr("action",i),setTimeout((function(){addCsrfField(o.find("form")[0])}),500)})),!1}function mapBox(){$("#mapBox").on("show.bs.modal",(function(t){var e=$(t.relatedTarget);$(".modal-header #myModalLabel").html(e.attr("data-title")),$(this).find(".fetched-data").load(e.attr("href"))}))}function formAction(t,e,n=""){csrf_semua_form(),""!=n&&$("#"+t).attr("target",n),$("#"+t).attr("action",e),$("#"+t).submit()}function notification(t,e){""!=t&&$("#maincontent").prepend('<div id="notification" class="alert alert-'+t+' alert-dismissible"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+e+"</div>")}function cek_koneksi(){$("#maincontent").prepend('<div class = "callout callout-warning"><h4><i class="fa fa-warning"></i>&nbsp;&nbsp;Informasi</h4 ><p> Aplikasi tidak dapat terhubung dengan koneksi internet, beberapa modul mungkin tidak berjalan dengan baik. </a></p></div>')}function cari_nik(){$("#cari_nik").change((function(){$("#main").submit()})),$("#cari_nik_suami").change((function(){$("#main").submit()})),$("#cari_nik_istri").change((function(){$("#main").submit()}))}function select_options(t,e){var n=t.attr("data-source")+e;t.find("option").not(".placeholder").remove().end(),$.ajax({url:n}).then((function(e){JSON.parse(e).forEach((e=>{var n=$("<option>");n.val(e[t.attr("data-valueKey")]).text(e[t.attr("data-displayKey")]),t.append(n)}))}))}function _calculateAge(t){if(t){var e=t.split("-"),n=new Date(e[2],e[1]-1,e[0]),a=(new Date).getTime()-n.getTime(),i=new Date(a);return Math.abs(i.getUTCFullYear()-1970)}}function urlencode(t){return t=(t+"").toString(),encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function tampil_badge(t,e){t.load(e),setTimeout((function(){t.text().trim().length?t.show():t.hide()}),500)}function refresh_badge(t,e){if(t.length){tampil_badge(t,e);setInterval((function(){tampil_badge(t,e)}),1e4)}}function huruf_awal_besar(t){return t.replace(/\S+/g,(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()))}setTimeout((function(){$("#notification").fadeIn("slow")}),500),setTimeout((function(){$("#notification").fadeOut("slow")}),3e3),$((function(){$("#op_item input:checked").parent().css({background:"#c9cdff",border:"0.5px solid #7a82eb"}),$("#op_item input").change((function(){$(this).is("input:checked")?($("#op_item input").parent().css({background:"#fafafa"}),$("#op_item input:checked").parent().css({background:"#c9cdff",border:"0.5px solid #7a82eb"}),$(this).parent().css({background:"#c9cdff"})):$(this).parent().css({background:"#fafafa",border:"0px"})})),$("#op_item label").click((function(){$(this).prev().trigger("click")}))})),$("document").ready((function(){$(".table-responsive").on("show.bs.dropdown",(function(t){var e=$(this),n=$(t.target).find(".dropdown-menu"),a=e.offset().top+e.height(),i=$(t.target).offset().top+$(t.target).outerHeight(!0)+n.outerHeight(!0);i>a&&(e.css("padding-bottom",i-a),$(".table-responsive")[0].scrollIntoView(!1))})),$(".table-responsive").on("hide.bs.dropdown",(function(){$(this).css("padding-bottom",0)}))}));var supportsES6=function(){try{return new Function("(a = 0) => a"),!0}catch(t){return!1}}();function ditolak(t,e,n,a="Alasan Ditolak",i,o){Swal.fire({title:a,input:"textarea",inputPlaceholder:o,text:i,inputValidator:t=>{if(!t)return"Kolom keterangan tidak boleh kosong"},customClass:{popup:"swal-lg",htmlContainer:"swal-left swal-bold"},showCancelButton:!0,confirmButtonText:"Kirim",cancelButtonText:"Tutup",showLoaderOnConfirm:!0,preConfirm:n=>{const a=new FormData;return a.append("sidcsrf",getCsrfToken()),a.append("id",t),a.append("alasan",n),fetch(e,{method:"POST",body:a}).then((t=>{if(!t.ok)throw new Error(t.statusText);return t.json()})).catch((t=>{console.log(t),Swal.showValidationMessage(`Request failed: ${t}`)}))}}).then((t=>{t.isConfirmed&&(1==t.value.status?swal2_success(n,"Berhasil dikembalikan"):Swal.fire({icon:"error",title:t.value.message}))}))}function swal2_success(t,e="Berhasil disimpan"){Swal.fire({icon:"success",title:e,showConfirmButton:!1,timer:1500}).then((e=>{window.location.replace(t)}))}function swal2_question(t,e,n,a,i=!1){Swal.fire({title:n,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d73925",confirmButtonText:"Ya",showDenyButton:i,denyButtonColor:"#ffc107",denyButtonText:"Tolak",cancelButtonText:"Tutup"}).then((n=>{n.isConfirmed?(Swal.fire({title:"Sedang Memproses",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{Swal.showLoading()}}),$.ajax({url:t.confirm,type:"Post",data:a}).done((function(){window.location.replace(e.confirm)})).fail((function(t){Swal.fire({icon:"error",text:t.statusText})}))):n.isDenied&&ditolak(a.id,t.denied,e.denied)}))}function parseJwt(t){var e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(e).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}function swalLoading(){Swal.fire({title:"Loading!",allowOutsideClick:!1,customClass:{confirmButton:"btn btn-primary waves-effect waves-light d-none"},buttonsStyling:!1}),Swal.showLoading()}function swalBerhasil(t="Berhasil !!",e=!0){btnclass=e?"":"d-none",Swal.fire({title:t,icon:"success",showClass:{popup:"animate__animated animate__flipInX"},allowOutsideClick:!1,customClass:{confirmButton:`btn btn-primary waves-effect waves-light ${btnclass}`},buttonsStyling:!1})}function swalError(t="",e="Gagal !!",n=!0){Swal.fire({title:e,icon:"error",text:t,showClass:{popup:"animate__animated animate__flipInX"},allowOutsideClick:!0,customClass:{confirmButton:"btn btn-primary waves-effect waves-light"},buttonsStyling:!1})}function SwalOpt(t="Apakah anda yakin ?",e="Data akan disimpan!",n="warning"){return{title:t,icon:n,text:e,allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:"Ya !!",showLoaderOnConfirm:!0,customClass:{confirmButton:"btn btn-primary me-3 waves-effect waves-light",cancelButton:"btn btn-outline-danger waves-effect"}}}
